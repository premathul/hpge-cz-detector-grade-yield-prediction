# LAMMPS Input: Melt Lower Half (Impurities) and Cool, Solid (Ge) on Top

units           metal
dimension       3
boundary        p p f
atom_style      atomic

read_data       data.ge_solid_liquid_impurities.lammps

# ---------- Define Potential ----------
pair_style      sw
pair_coeff      * * Ge_B_Al_Ga_P_full.sw Ge B Al Ga P

# ---------- Group Definitions ----------
region          bottom block INF INF INF INF INF 22.6 units box  # Melt (impurities)
region          top block INF INF INF INF 22.6 INF units box      # Solid Ge

group           melt region bottom
group           solid region top
group           impurities type 2 3 4 5

# ---------- Velocity Initialization ----------
velocity        melt create 2000.0 4928459 dist gaussian mom yes rot yes

# ---------- Neighbor Setup ----------
neighbor        2.0 bin
neigh_modify    delay 0 every 1 check yes

# ---------- Thermo Output ----------
thermo          100
thermo_style    custom step temp pe ke etotal press
thermo_modify   lost ignore

# ---------- Boundary Wall to Prevent Atom Escape ----------
fix             wall all wall/reflect zlo EDGE

# ---------- Dump Configuration ----------
dump            1 all custom 500 dump.melt.lammpstrj id type x y z vx vy vz

# ---------- Time Step ----------
timestep        0.001

# ---------- Melt Phase ----------
fix             ensemble1 melt nvt temp 2000.0 2000.0 0.1
run             25000  # 25 ps of heating at 2000 K

unfix           ensemble1

# ---------- Cooldown Phase ----------
fix             ensemble2 melt nvt temp 2000.0 1000.0 0.1
run             25000  # 25 ps of cooling to 1000 K

unfix           ensemble2

# ---------- Save Final State ----------
write_data      post_melt_cooldown_1.data
write_restart   post_melt_cooldown_1.restart

